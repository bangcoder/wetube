{"version":3,"sources":["getBlobDuration.js"],"names":["_callee","blob","tempVideoEl","durationP","regeneratorRuntime","wrap","_context","prev","next","document","createElement","Promise","resolve","addEventListener","duration","Infinity","currentTime","Number","MAX_SAFE_INTEGER","ontimeupdate","abrupt","stop","this"],"mappings":"0bAKe,SAAAA,EAA+BC,GAA/B,IAAAC,EAAAC,EAAA,OAAAC,mBAAAC,KAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OACPN,EAAcO,SAASC,cAAc,SAN7CP,EAAA,IAAAQ,QAAA,SAAAC,GAAA,OASIV,EAAYW,iBAAiB,iBAAkB,WAE1CX,EAAYY,WAAaC,EAAAA,GAC1Bb,EAAYc,YAAcC,OAAOC,iBACjChB,EAAYiB,aAAe,WACzBjB,EAAYiB,aAAe,KATtBP,EAAAV,EAAAY,UAAAZ,EAAAc,YAAA,IAGPb,EAAAA,EAAgBQ,cAIhBT,EAAAA,IAAAA,OAAAA,IAAYc,gBAAcC,GAPnBX,EAAAc,OAAA,SASLlB,GATK,KAAA,EAAA,IAAA,MAAA,OAAAI,EAAAe,SAAArB,EAAAsB","file":"getBlobDuration.js","sourcesContent":["/**\n * @param {Blob} blob\n *\n * @returns {Promise<Number>} Blob duration in seconds.\n */\nexport default async function getBlobDuration(blob) {\n  const tempVideoEl = document.createElement('video')\n\n  const durationP = new Promise(resolve =>\n    tempVideoEl.addEventListener('loadedmetadata', () => {\n      // Chrome bug: https://bugs.chromium.org/p/chromium/issues/detail?id=642012\n      if(tempVideoEl.duration === Infinity) {\n        tempVideoEl.currentTime = Number.MAX_SAFE_INTEGER\n        tempVideoEl.ontimeupdate = () => {\n          tempVideoEl.ontimeupdate = null\n          resolve(tempVideoEl.duration)\n          tempVideoEl.currentTime = 0\n        }\n      }\n      // Normal behavior\n      else\n        resolve(tempVideoEl.duration)\n    })\n  )\n\n  tempVideoEl.src = window.URL.createObjectURL(blob)\n\n  return durationP\n}"]}